"use strict";

window.addEventListener("load", start);

// burger menu
function start() {
  console.log("start");

  blotter();

  let fontFaceSet = document.fonts;
  console.log(fontFaceSet);

  document.fonts.ready.then(function () {
    // Any operation that needs to be done only after all the fonts
    // have finished loading can go here.
    console.log(fontFaceSet);
  });

  document.querySelector(".burger-menu-icon").addEventListener("click", toggleBurgerMenu);
}

function toggleBurgerMenu() {
  const burgerMenu = document.querySelector(".burger-menu");
  const burgerMenuText = document.querySelector(".burger-menu-text");

  if (burgerMenu.classList.contains("open")) {
    burgerMenu.classList.remove("open");
    burgerMenuText.textContent = "Menu";
  } else {
    burgerMenu.classList.add("open");
    burgerMenuText.textContent = "Close";
  }
}

function toggle(elm) {
  if (elm) {
    elm = false;
  } else if (elm === false) {
    elm = true;
  }

  return elm;
}

function blotter() {
  let text = new Blotter.Text("Ø", {
    family: "pilowlava-regular",
    size: 70,
    fill: "white",
  });
  let material = new window.Blotter.LiquidDistortMaterial();
  let blotter = new Blotter(material, { texts: text });
  material.uniforms.uSpeed.value = 0.1;
  material.uniforms.uVolatility.value = 0.1;
  let scope = blotter.forText(text);
  scope.globalCompositeOperation = "difference";
  scope.appendTo(document.querySelector(".header-logo"));
}

// function customCursor() {
//   let cursor = document.querySelector(".custom-cursor");
//   let links = document.querySelectorAll("a");
//   let initCursor = false;

//   for (let i = 0; i < links.length; i++) {
//     let selfLink = links[i];

//     selfLink.addEventListener("mouseover", function () {
//       cursor.classList.add("custom-cursor--link");
//     });
//     selfLink.addEventListener("mouseout", function () {
//       cursor.classList.remove("custom-cursor--link");
//     });
//   }

//   window.onmousemove = function (e) {
//     let mouseX = e.clientX;
//     let mouseY = e.clientY;

//     if (!initCursor) {
//       // cursor.style.opacity = 1;
//       TweenLite.to(cursor, 0.3, {
//         opacity: 1,
//       });
//       initCursor = true;
//     }

//     TweenLite.to(cursor, 0, {
//       top: mouseY + "px",
//       left: mouseX + "px",
//     });
//   };

//   window.onmouseout = function (e) {
//     TweenLite.to(cursor, 0.3, {
//       opacity: 0,
//     });
//     initCursor = false;
//   };
// }

document.addEventListener("mousemove", customCursorMove);

function customCursorMove(event) {
  console.log("customCursor");
  const x = event.pageX - 10;
  const y = event.pageY - 10;
  const cursor = document.querySelector("custom-cursor");
  cursor.style.left = x + "px";
  cursor.style.top = y + "px";
}

document.querySelector(".link").addEventListener("mouseover", onMouseOver);

function onMouseOver(event) {}

$("div").on("mouseover", function () {
  $("#cursor").css({ transform: "scale(2)" });
});

$("div").on("mouseleave", function () {
  $("#cursor").css({ transform: "scale(1)" });
});

// sayHello
var Hello = [
  "\n%c STOP RIGHT THERE CRIMINAL SCUM!" + " %c http://www.nørman.com/ \n",
  "color: white; font-size: 14px; background: #000; padding:5px 0;",
  "background: #fff; padding:3px 0; margin-bottom: 4px;",
];
window.console.log.apply(console, Hello);
